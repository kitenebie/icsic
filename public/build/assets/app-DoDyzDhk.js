import{initializeApp as o}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";import{getMessaging as a,getToken as i,onMessage as n}from"https://www.gstatic.com/firebasejs/10.12.0/firebase-messaging.js";const s={apiKey:"AIzaSyBomSVQcMytesRLPUZgz9I-MVuQt5yEKCQ",authDomain:"fb1-tst.firebaseapp.com",databaseURL:"https://fb1-tst-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"fb1-tst",storageBucket:"fb1-tst.firebasestorage.app",messagingSenderId:"FIREBA426139628396SE_MESSAGING_SENDER_ID",appId:"1:426139628396:web:52ec020c8d45e26c53b949"},c=o(s),t=a(c);i(t,{vapidKey:void 0}).then(e=>{e?(console.log("FCM Token:",e),fetch("/send-notification",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({fcm_token:e})})):console.warn("No registration token available.")}).catch(e=>{console.error("FCM token error:",e)});n(t,e=>{console.log("Message received: ",e),new Notification(e.notification.title,{body:e.notification.body})});
